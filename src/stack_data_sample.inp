set verbose off
clear

# include stack_data.gfn
set workdir "/home/ninja/repo/stack_data"
include "./src/stack_data.inp" --force

# open international_gdp.gdt --frompkg=stack_data --quiet
open "./src/international_gdp.gdt"

# Store stacked data
matrix mdata
list to_be_stacked = dataset
string filename = "stacked_series.gdt"
stack_data(to_be_stacked, filename, "gdp", "gdp for AU AT BE CA CH", &mdata)
print mdata
stop

# Open stacked data and set a panel
open "@filename" -p -q
series country_name = unit_id
# attach country name string
stringify(country_name, defarray("AU", "AT", "BE", "CA", "CH"))

setobs unit_id obs_id --panel-vars
print unit_id country_name obs_id gdp -o


# Note: You may easily join another data set using the keys 'unit_id' and 'obs_id'
# EXAMPLE: <join somne_data.gdt --ikey=unit_id,obs_id --okey=some_unit_key,some_obs_key>

